trigger: none

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: ArtifactoryGenericUpload@1
  inputs:
    artifactoryService: 'ecosys'
    specSource: 'taskConfiguration'
    fileSpec: |
      {
        "files": [
          {
            "pattern": "README",
            "target": "generic-local/rabbit"
          }
        ]
      }
    collectBuildInfo: true
    buildName: '$(Build.DefinitionName)'
    buildNumber: '$(Build.BuildNumber)'
    includeEnvVars: true
    failNoOp: true
    
- task: ArtifactoryGenericDownload@1
  inputs:
    artifactoryService: 'ecosys'
    specSource: 'taskConfiguration'
    fileSpec: |
      {
        "files": [
          {
            "pattern": "generic-local/rabbit",
            "target": "./"
          }
        ]
      }
    collectBuildInfo: true
    failNoOp: true

- task: ArtifactoryPublishBuildInfo@1
  inputs:
    artifactoryService: 'ecosys'
    buildName: '$(Build.DefinitionName)'
    buildNumber: '$(Build.BuildNumber)'